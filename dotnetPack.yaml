parameters:
  branchName: dev
  major: 0
  minor: 0
  patch: 0

steps:

  - ${{ if eq(parameters.branchName, 'master') }}:
    - task: DotNetCoreCLI@2
      displayName: 'dotnet pack'
      inputs:
        command: pack
        verbosityPack: 'Normal'
        configuration: release
        versioningScheme: byEnvVar
        versionEnvVar: PACKAGEVERSION

  - ${{ if ne(parameters.branchName, 'master') }}:
    - task: DotNetCoreCLI@2
      displayName: 'dotnet pack'
      inputs:
        command: pack
        verbosityPack: 'Normal'
        configuration: release
        versioningScheme: byPrereleaseNumber
        majorVersion: ${{ parameters.major }}
        minorVersion: ${{ parameters.minor }}
        patchVersion: ${{ parameters.patch }}

